{"ast":null,"code":"import React,{useEffect,useState}from'react';import{getTareas,crearTarea,editarTarea,eliminarTarea}from'../services/api';import{socket}from'../index';import TaskForm from'./TaskForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TaskList=()=>{const[tareas,setTareas]=useState([]);const[tareaSeleccionada,setTareaSeleccionada]=useState(null);// Cargar tareas iniciales\nconst cargarTareas=async()=>{const res=await getTareas();setTareas(res.data);};useEffect(()=>{cargarTareas();// Escuchar eventos de actualización\nsocket.on('tarea:actualizar',()=>{cargarTareas();});return()=>{socket.off('tarea:actualizar');};},[]);const manejarSubmit=async formulario=>{if(formulario._id){await editarTarea(formulario._id,formulario);}else{await crearTarea(formulario);}socket.emit('tarea:nueva',{});// Emitir para sincronizar\n};const manejarEliminar=async id=>{await eliminarTarea(id);socket.emit('tarea:nueva',{});// Emitir para sincronizar\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TaskForm,{onSubmit:manejarSubmit,tareaSeleccionada:tareaSeleccionada,limpiarSeleccion:()=>setTareaSeleccionada(null)}),/*#__PURE__*/_jsx(\"h3\",{children:\"Lista de Tareas\"}),/*#__PURE__*/_jsx(\"ul\",{children:tareas.map(tarea=>{var _tarea$fechaLimite;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:tarea.titulo}),\" - \",tarea.estado,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Fecha l\\xEDmite: \",((_tarea$fechaLimite=tarea.fechaLimite)===null||_tarea$fechaLimite===void 0?void 0:_tarea$fechaLimite.slice(0,10))||'No definida']}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTareaSeleccionada(tarea),children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>manejarEliminar(tarea._id),children:\"Eliminar\"})]},tarea._id);})})]});};export default TaskList;","map":{"version":3,"names":["React","useEffect","useState","getTareas","crearTarea","editarTarea","eliminarTarea","socket","TaskForm","jsx","_jsx","jsxs","_jsxs","TaskList","tareas","setTareas","tareaSeleccionada","setTareaSeleccionada","cargarTareas","res","data","on","off","manejarSubmit","formulario","_id","emit","manejarEliminar","id","children","onSubmit","limpiarSeleccion","map","tarea","_tarea$fechaLimite","titulo","estado","fechaLimite","slice","onClick"],"sources":["C:/Users/cporr/Desktop/task-manager-distribuido/frontend/src/components/TaskList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getTareas, crearTarea, editarTarea, eliminarTarea } from '../services/api';\r\nimport { socket } from '../index';\r\nimport TaskForm from './TaskForm';\r\n\r\nconst TaskList = () => {\r\n  const [tareas, setTareas] = useState([]);\r\n  const [tareaSeleccionada, setTareaSeleccionada] = useState(null);\r\n\r\n  // Cargar tareas iniciales\r\n  const cargarTareas = async () => {\r\n    const res = await getTareas();\r\n    setTareas(res.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    cargarTareas();\r\n\r\n    // Escuchar eventos de actualización\r\n    socket.on('tarea:actualizar', () => {\r\n      cargarTareas();\r\n    });\r\n\r\n    return () => {\r\n      socket.off('tarea:actualizar');\r\n    };\r\n  }, []);\r\n\r\n  const manejarSubmit = async (formulario) => {\r\n    if (formulario._id) {\r\n      await editarTarea(formulario._id, formulario);\r\n    } else {\r\n      await crearTarea(formulario);\r\n    }\r\n    socket.emit('tarea:nueva', {}); // Emitir para sincronizar\r\n  };\r\n\r\n  const manejarEliminar = async (id) => {\r\n    await eliminarTarea(id);\r\n    socket.emit('tarea:nueva', {}); // Emitir para sincronizar\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <TaskForm\r\n        onSubmit={manejarSubmit}\r\n        tareaSeleccionada={tareaSeleccionada}\r\n        limpiarSeleccion={() => setTareaSeleccionada(null)}\r\n      />\r\n\r\n      <h3>Lista de Tareas</h3>\r\n      <ul>\r\n        {tareas.map((tarea) => (\r\n          <li key={tarea._id}>\r\n            <strong>{tarea.titulo}</strong> - {tarea.estado}\r\n            <br />\r\n            <small>Fecha límite: {tarea.fechaLimite?.slice(0, 10) || 'No definida'}</small>\r\n            <br />\r\n            <button onClick={() => setTareaSeleccionada(tarea)}>Editar</button>\r\n            <button onClick={() => manejarEliminar(tarea._id)}>Eliminar</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskList;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,UAAU,CAAEC,WAAW,CAAEC,aAAa,KAAQ,iBAAiB,CACnF,OAASC,MAAM,KAAQ,UAAU,CACjC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACc,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAEhE;AACA,KAAM,CAAAgB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAhB,SAAS,CAAC,CAAC,CAC7BY,SAAS,CAACI,GAAG,CAACC,IAAI,CAAC,CACrB,CAAC,CAEDnB,SAAS,CAAC,IAAM,CACdiB,YAAY,CAAC,CAAC,CAEd;AACAX,MAAM,CAACc,EAAE,CAAC,kBAAkB,CAAE,IAAM,CAClCH,YAAY,CAAC,CAAC,CAChB,CAAC,CAAC,CAEF,MAAO,IAAM,CACXX,MAAM,CAACe,GAAG,CAAC,kBAAkB,CAAC,CAChC,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,aAAa,CAAG,KAAO,CAAAC,UAAU,EAAK,CAC1C,GAAIA,UAAU,CAACC,GAAG,CAAE,CAClB,KAAM,CAAApB,WAAW,CAACmB,UAAU,CAACC,GAAG,CAAED,UAAU,CAAC,CAC/C,CAAC,IAAM,CACL,KAAM,CAAApB,UAAU,CAACoB,UAAU,CAAC,CAC9B,CACAjB,MAAM,CAACmB,IAAI,CAAC,aAAa,CAAE,CAAC,CAAC,CAAC,CAAE;AAClC,CAAC,CAED,KAAM,CAAAC,eAAe,CAAG,KAAO,CAAAC,EAAE,EAAK,CACpC,KAAM,CAAAtB,aAAa,CAACsB,EAAE,CAAC,CACvBrB,MAAM,CAACmB,IAAI,CAAC,aAAa,CAAE,CAAC,CAAC,CAAC,CAAE;AAClC,CAAC,CAED,mBACEd,KAAA,QAAAiB,QAAA,eACEnB,IAAA,CAACF,QAAQ,EACPsB,QAAQ,CAAEP,aAAc,CACxBP,iBAAiB,CAAEA,iBAAkB,CACrCe,gBAAgB,CAAEA,CAAA,GAAMd,oBAAoB,CAAC,IAAI,CAAE,CACpD,CAAC,cAEFP,IAAA,OAAAmB,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBnB,IAAA,OAAAmB,QAAA,CACGf,MAAM,CAACkB,GAAG,CAAEC,KAAK,OAAAC,kBAAA,oBAChBtB,KAAA,OAAAiB,QAAA,eACEnB,IAAA,WAAAmB,QAAA,CAASI,KAAK,CAACE,MAAM,CAAS,CAAC,MAAG,CAACF,KAAK,CAACG,MAAM,cAC/C1B,IAAA,QAAK,CAAC,cACNE,KAAA,UAAAiB,QAAA,EAAO,mBAAc,CAAC,EAAAK,kBAAA,CAAAD,KAAK,CAACI,WAAW,UAAAH,kBAAA,iBAAjBA,kBAAA,CAAmBI,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,GAAI,aAAa,EAAQ,CAAC,cAC/E5B,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQ6B,OAAO,CAAEA,CAAA,GAAMtB,oBAAoB,CAACgB,KAAK,CAAE,CAAAJ,QAAA,CAAC,QAAM,CAAQ,CAAC,cACnEnB,IAAA,WAAQ6B,OAAO,CAAEA,CAAA,GAAMZ,eAAe,CAACM,KAAK,CAACR,GAAG,CAAE,CAAAI,QAAA,CAAC,UAAQ,CAAQ,CAAC,GAN7DI,KAAK,CAACR,GAOX,CAAC,EACN,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAAC,CAED,cAAe,CAAAZ,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}